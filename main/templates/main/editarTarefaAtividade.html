{% extends 'base_template.html' %}
{% block steps %}
<li><a href="/">Início</a></li>
    <li><a href="{% url 'tarefa_coordenador:consultar_tarefa' %}" aria-current="page">Consultar Tarefas</a></li>
    <li class="is-active"><a href="" aria-current="page">Editar Tarefa Auxiliar Atividade</a></li>
{% endblock %}
{% block content %}
<div style="padding: 3rem 2vw 1rem;">
  <div class="b-steps">
      <nav class="steps is-success">
          <ul class="step-items">
              <li class="step-item is-success is-active"><a class="step-link">
                      <div class="step-marker"><span class="icon"><i class="mdi mdi-book mdi-24px"></i></span></div>
                      <div class="step-details"><span class="step-title">Editar Tarefa Auxiliar Atividade</span>
                      </div>
                  </a></li>
          </ul>
      </nav>
      <hr>
<div class="ctr">
  <div style="padding: 3rem 2vw 1rem">
      <form method="POST" id="personForm"> {% csrf_token %}
          <div class="column">
              <div class="field">
                   <label class="label">Nome Tarefa:</label>
              <div class="control">
                   {{form.nome}}
              </div>
              </div>
            </div>
 
            <div class="ativi column">
              <div class="field">
                <label class="label">Selecionar Atividade:</label>
                <div class="control">
                  <div class="select is-fullwidth">
                    {{form.atividade_idatividade}}
                  </div>
                </div>
              </div>
          </div>

        <div class="column">
          <div class="field">
            <label class="label" >Sessão Da Atividade:</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="idsessao" name="idsession">
                  <option value="">---------------</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="field">
            <label class="label">Atribuir Colaborador:</label>
            <div class="control is-expanded">
              <div class="select is-fullwidth">
                {{form.colaborador_utilizador_idutilizador}}
              </div>
            </div>
          </div>
        </div>

          <hr>

          <div class="columns">
            <div class="column is-3">
              <a href="{% url 'tarefa_coordenador:consultar_tarefa' %}" class="button is-outlined" type="button">
                <span>Voltar</span>
              </a>
             </div>
             <div style="margin-left: 50%;" class="column"> 
              <button type="submit" class="button is-large is-success is-outlined" data-toggle="modal" data-target="#exampleModal">
                <span>Submeter</span>
              </button>
              </div>
      </form>
      </div>
    </div>
  </div>
    </section>
<style>
  .buttons {
  display: inline-block;
  width: 150px;
  margin: 0 px;
  left: 200px;
}
  .label {
  font-weight: normal;
}
.b-steps .steps .step-items .step-item .step-details .step-title {
  font-size: 1rem;
}

.ativi{
  width: 440px;
}

.ctr {
  width: 500px;
  right:500px;
  margin-left: 400px;
}

.hour{
  width: 300px;
}

.margintop{
  margin:12px;
}

.marginl{
  margin-left: 400px;
}

.margin2{
  margin-left:100px;
}
</style>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  $("#id_atividade_idatividade").change(function () {
    var atividadeID = $(this).val();  // get the selected country ID from the HTML input
    $.ajax({                       // initialize an AJAX request
      url: "{% url 'tarefa_coordenador:ajax_load_cities' %}",
      method: 'POST',                  // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
      data: {
        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
        'atividade_idatividade': atividadeID       // add the country id to the GET parameters
      },
      success: function (data) {   // `data` is the return of the `load_cities` view function
        $("#idsessao").html(data);  // replace the contents of the city input with the data that came from the server
      }
    });

  });
</script>
 
{% endblock content%}