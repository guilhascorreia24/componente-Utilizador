{% extends "homepage.html" %}
{% load ins_form_tags %}
{% block content %}

<div class="navbar-menu">
    {% include "navabar-colab.html" %}
    <div class="navbar-end">
        <div data-v-a67fe1ba="" class="navbar-item">
            <div data-v-a67fe1ba="" class="is-bottom-left is-mobile-modal dropdown ">
                <a class="dropdown-toggle" role="button" data-toggle="dropdown">
                    <div role="button" aria-haspopup="true" class="dropdown-trigger"><span data-v-a67fe1ba=""
                            role="button"><button data-v-a67fe1ba="" type="button" data-badge="0"
                                class="button has-badge-rounded has-badge-warning is-text"
                                style="margin-right: 0.9rem;">
                                <!----> <span><span data-v-a67fe1ba="" class="icon"><i
                                            class="mdi mdi-bell mdi-24px"></i></span></span>
                                <!----></button></span></div>
                </a>
                <div class="dropdown-menu">
                    <div role="menu" class="dropdown-content">
                        <div data-v-a67fe1ba="" role="menuitem" tabindex="0" class="dropdown-item"><strong
                                data-v-a67fe1ba="">Notificações</strong></div>
                        <hr data-v-a67fe1ba="" class="dropdown-divider">
                        <div data-v-a67fe1ba="">
                            <div data-v-a67fe1ba="" tabindex="0" class="dropdown-item">
                                <div data-v-a67fe1ba="" class="has-text-grey"> Não tem novas notificações!
                                </div>
                            </div>
                            <hr data-v-a67fe1ba="" class="dropdown-divider">
                        </div><a data-v-a67fe1ba="" tabindex="0" class="dropdown-item"><u data-v-a67fe1ba="">
                                Ver todas as notificações</u></a>
                    </div>
                </div>
            </div>
            <div data-v-a67fe1ba="" class="dropdown is-bottom-left is-mobile-modal">
                <div role="button" aria-haspopup="true" class="dropdown-trigger"><a href=""><button data-v-a67fe1ba=""
                            type="button" class="button is-text" style="margin-right: 0.9rem;">
                            <!----> <span><span data-v-a67fe1ba="" class="icon"><i
                                        class="mdi mdi-account-circle mdi-24px"></i></span></span>
                            <!----></button></a></div>
                <div aria-hidden="true" class="background" style="display: none;"></div>
            </div><a href="../logout"><button data-v-a67fe1ba="" type="button" class="button"><span
                        class="icon is-small"><i class="mdi mdi-logout-variant"></i></span> <span>
                        Sair </span>
                    <!----></button></a>
        </div>
    </div>
</div>
</nav>
<div data-v-8716d23a="" id="top-hero" class="hero is-primary is-bold">
    <div data-v-8716d23a="" id="top-hero-body" class="hero-body"></div>
</div>


<div data-v-8716d23a="" id="page-content">
    <div data-v-8716d23a="" class="card">
        <div data-v-8716d23a="" class="card-content">
            <div data-v-8716d23a="" class="columns">
                <div class="table-wrapper">
                    <form id = "regForm" method="POST">
                    {% csrf_token %}
                        <table id="myTable" class="table table-striped">
                                <thead>
                                    <tr>
                                        <!---->
                                        <th class="is-sortable">
                                            <div class="th-wrap" > Dia <span class="icon is-small"
                                                style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap" > Hora Início <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap" > Hora Final <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap"> Tipo Tarefa <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <!---->
                                    </tr>
                                    <!---->
                                    <!---->
                                </thead>  
                                {{ form.management_form }}                               
                                <tbody id="disponibilidade">
                                    {% for disponibilidade in form %}
                                        <tr draggable="false" class="" scope="row">
                                        <!---->
                                            <td data-label="Dia" class="">
                                                {{ disponibilidade.dia_dia }}
                                            </td>
                                            <td data-label="Hora Início" class="">
                                                {{ disponibilidade.horario_hora }}
                                            </td>
                                            <td data-label="Hora Final" class="">
                                                {{ disponibilidade.horario_hora1 }}
                                            </td>
                                            <td data-label="Tipo Tarefa" class=""> 
                                                <select name={{ tipo_tarefa.html_name }} id={{ tipo_tarefa.id_for_label }}>
                                                    <option value="" selected="">---------</option>

                                                    <option value="Guiar Grupo">Guiar Grupo</option>

                                                    <option value="Ajudar Docente">Ajudar Docente</option>

                                                </select>
                                            </td>                 
                                        </tr>
                                    {% endfor %}  
                                    <!---->
                                    <!---->
                                    <!---->
                                    <!---->
                                </tbody>
                            <!---->
                        </table>

                        <!--TEMPLATE FOR ADD MORE REPONSAVEIS-->
                        <table style="display:none">
                            <tbody id="template_disponibilidade">
                            <tr draggable="false" class="" scope="row">
                                    <!---->
                                    <td data-label="Dia" class="">
                                            {{form.empty_form.dia_dia}}
                                    </td>
                                    <td data-label="Hora Início" class="">
                                            {{form.empty_form.horario_hora}}
                                    </td>
                                    <td data-label="Hora Final" class="">
                                            {{form.empty_form.horario_hora1}}
                                    </td>
                                    <td data-label="Tipo Tarefa" class=""> 
                                        <select name="{{ form.empty_form.tipo_tarefa.html_name }}" id="{{ form.empty_form.tipo_tarefa.id_for_label }}">
                                            <option value="" selected="">---------</option>

                                            <option value="Guiar Grupo">Guiar Grupo</option>

                                            <option value="Ajudar Docente">Ajudar Docente</option>

                                        </select>
                                    </td>
                            </tr> 
                            </tbody>
                        </table>

                        <!--END TEMPLATE-->
                        <br>
                        <div>
                            <input type="submit" style="text-align:center">
                        </div>
                        <br>
                        <button type="button" class="button" onclick="add_responsavel()">
                            <span class="icon is-small"><i class="mdi mdi-plus"></i></span>
                            <span>Adicionar disponibilidade</span>
                        </button>
                        <span>
                            <button type="button" class="button" style="float:right" onclick="delete_responsavel()">
                                <span class="icon is-small"><i class="mdi mdi-minus"></i></span>
                                <span>Remover disponibilidade</span>
                            </button>
                        </span>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
function add_responsavel() 
{
    var value = parseInt($('#id_tarefa-TOTAL_FORMS').val());
    $('#id_tarefa-TOTAL_FORMS').val(value+1);

    var form_idx = $('#disponibilidade').children().length;
    var template = $('#template_disponibilidade').clone(true);

    $('#disponibilidade').append(template.html().replace(/__prefix__/g, form_idx));
}

function delete_responsavel() 
{
    if($('#id_tarefa-TOTAL_FORMS').val() > 1)
    {
        var value = parseInt($('#id_tarefa-TOTAL_FORMS').val());
        $('#id_tarefa-TOTAL_FORMS').val(value-1);
        $('#disponibilidade').children().last().remove();
    }
}
</script>

{% endblock content %}