{% extends "homepage.html" %}
{% load ins_form_tags %}
{% block content %}

<div class="navbar-menu">
    {% include "navabar-colab.html" %}
    <div class="navbar-end">
        <div data-v-a67fe1ba="" class="navbar-item">
            <div data-v-a67fe1ba="" class="is-bottom-left is-mobile-modal dropdown ">
                <a class="dropdown-toggle" role="button" data-toggle="dropdown">
                    <div role="button" aria-haspopup="true" class="dropdown-trigger"><span data-v-a67fe1ba=""
                            role="button"><button data-v-a67fe1ba="" type="button" data-badge="0"
                                class="button has-badge-rounded has-badge-warning is-text"
                                style="margin-right: 0.9rem;">
                                <!----> <span><span data-v-a67fe1ba="" class="icon"><i
                                            class="mdi mdi-bell mdi-24px"></i></span></span>
                                <!----></button></span></div>
                </a>
                <div class="dropdown-menu">
                    <div role="menu" class="dropdown-content">
                        <div data-v-a67fe1ba="" role="menuitem" tabindex="0" class="dropdown-item"><strong
                                data-v-a67fe1ba="">Notificações</strong></div>
                        <hr data-v-a67fe1ba="" class="dropdown-divider">
                        <div data-v-a67fe1ba="">
                            <div data-v-a67fe1ba="" tabindex="0" class="dropdown-item">
                                <div data-v-a67fe1ba="" class="has-text-grey"> Não tem novas notificações!
                                </div>
                            </div>
                            <hr data-v-a67fe1ba="" class="dropdown-divider">
                        </div><a data-v-a67fe1ba="" tabindex="0" class="dropdown-item"><u data-v-a67fe1ba="">
                                Ver todas as notificações</u></a>
                    </div>
                </div>
            </div>
            <div data-v-a67fe1ba="" class="dropdown is-bottom-left is-mobile-modal">
                <div role="button" aria-haspopup="true" class="dropdown-trigger"><a href=""><button data-v-a67fe1ba=""
                            type="button" class="button is-text" style="margin-right: 0.9rem;">
                            <!----> <span><span data-v-a67fe1ba="" class="icon"><i
                                        class="mdi mdi-account-circle mdi-24px"></i></span></span>
                            <!----></button></a></div>
                <div aria-hidden="true" class="background" style="display: none;"></div>
            </div><a href="../logout"><button data-v-a67fe1ba="" type="button" class="button"><span
                        class="icon is-small"><i class="mdi mdi-logout-variant"></i></span> <span>
                        Sair </span>
                    <!----></button></a>
        </div>
    </div>
</div>
</nav>
<div data-v-8716d23a="" id="top-hero" class="hero is-primary is-bold">
    <div data-v-8716d23a="" id="top-hero-body" class="hero-body"></div>
</div>
<div data-v-8716d23a="" id="page-content">
    <div data-v-8716d23a="" class="card">
        <div data-v-8716d23a="" class="card-content">
                <div data-v-8716d23a="" id="top">
                    <nav aria-label="breadcrumbs" class="breadcrumb" style="background-color:white">
                        <ul>
                            <li><a href="/" class="router-link-active">Início</a></li>
                            <li class="is-active"><a href="" class="router-link-exact-active router-link-active">Disponibilidade</a>
                            </li>
                        </ul>
                    </nav>
                    <div style="padding: 3rem 2vw 1rem;">
                        <div class="b-steps">
                            <nav class="steps is-success">
                                <ul class="step-items">
                                    <li class="step-item is-success is-active"><a class="step-link" >
                                            <div class="step-marker"><span class="icon"><i
                                                        class="mdi mdi-book mdi-24px"></i></span></div>
                                            <div class="step-details"><span class="step-title">Disponibilidade</span>
                                            </div>
                                        </a></li>
                                </ul>
                            </nav>
                            <section class="step-content">
                                <div class="step-item" style="">
                                    <div style="padding: 1rem 2vw 0px;">
                                        <hr style="
                                        margin-bottom: 0px;
                                        margin-top: 0px;
                                    "> 
                    <form id = "regForm" method="POST" style="
                    margin-bottom: 0px;
                ">
                    {% csrf_token %}
                        <table id="myTable" class="table table-striped">
                                <thead>
                                    <tr>
                                        <!---->
                                        <th class="is-sortable">
                                            <div class="th-wrap" > Dia <span class="icon is-small"
                                                style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap" > Hora <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap"> Tipo Tarefa <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <th class="is-sortable">
                                            <div class="th-wrap"> Ações <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                            </div>
                                        </th>
                                        <!---->
                                    </tr>
                                    <!---->
                                    <!---->
                                </thead>                                 
                                <tbody id="responsavel_form">
                                    {{ form.management_form }}
                                    {% for disponibilidade in form %}
                                        <tr draggable="false" class="" scope="row">
                                        <!---->
                                            <td data-label="Dia" class="">
                                                {{disponibilidade.dia_dia}}
                                            </td>
                                            <td data-label="Hora" class="">
                                                {{disponibilidade.horario_hora}}
                                            </td>
                                            <td data-label="Tipo Tarefa" class=""> 
                                                <select name={{ tipo_tarefa.html_name }} id={{ tipo_tarefa.id_for_label }}>
                                                    <option value="" selected="">---------</option>

                                                    <option value="Guiar Grupo">Guiar Grupo</option>

                                                    <option value="Ajudar Docente">Ajudar Docente</option>

                                                </select>
                                            </td>                        
                                            <td data-label="Ações" class="has-text">
                                                <a role="button"><span class="icon has-text-danger"><i
                                                            class="mdi mdi-close mdi-24px"></i></span></a></td>
                                        {% endfor %}  
                                    <!---->
                                    <!---->
                                    <!---->
                                    <!---->
                                </tbody>
                            <!---->
                        </table>


                        <!--TEMPLATE FOR ADD MORE REPONSAVEIS-->
                        <div id="responsavel_template" style="display:none">
                            <div class="columns responsavel">
                                <div class="column">
                                    <div class="field">
                                        <div class="control is-clearfix">
                                            {{form.empty_form.dia_dia}}
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="field">
                                        <div class="control is-clearfix">
                                            {{form.responsaveis.empty_form.horario_hora}}
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="field">
                                        <div class="control is-clearfix">
                                            {{form.empty_form.tipo_tarefa}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--END TEMPLATE-->

                        <button type="button" class="button" onclick="add_responsavel()">
                            <span class="icon is-small"><i class="mdi mdi-plus"></i></span>
                            <span>Adicionar disponibilidade</span>
                        </button>

                        <span>
                            <button type="button" class="button" style="float:right" onclick="delete_responsavel()">
                                <span>Remover disponibilidade</span><span class="icon is-small"><i class="mdi mdi-minus"></i></span>
                            </button>
                        </span>
                        <div class="column is-8 is-offset-2">
                            <div class="level">
                                <div class="level-left"><a href=".." class="button is-outlined" type="button">
                                        <!----> <span> Cancelar </span>
                                        <!----></a></div>
                                <div class="level-right"><button type="button"
                                        class="button is-large is-success is-outlined" data-toggle="modal"
                                        data-target="#exampleModal" data-backdrop="false">
                                        <!----> <span> Submeter </span>
                                        <!----></button></div>
                            </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>



<script>
function add_responsavel() 
{
    var value = parseInt($('#id_tarefa-TOTAL_FORMS').val());
    $("#id_tarefa-TOTAL_FORMS").val(value+1);

    var form_idx = $('#responsavel_form').children().length;
    var template = $('#responsavel_template').clone(true);
    $('#responsavel_form').append(template.html().replace(/__prefix__/g, form_idx));
}

function delete_responsavel() 
{
    if($('#responsavel_form > .responsavel').length > 1)
    {
        var value = parseInt($('#id_responsaveis_set-TOTAL_FORMS').val());
        $('#id_responsaveis_set-TOTAL_FORMS').val(value-1);
        $('#responsavel_form > .responsavel').last().remove();
    }
}
</script>


{% endblock content %}