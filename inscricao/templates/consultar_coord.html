{% extends "base_template.html" %}
{% load ins_form_tags %}
{% block steps %}
<li><a href="/" class="router-link-active">Início</a></li>
<li class="is-active"><a href="{% url "blog:blog-home" %}"
        class="router-link-exact-active router-link-active">Tarefas</a></li>
{% endblock %}
{% block content %}
            <div data-v-8716d23a="" class="columns">
                <div class="column is-3">
                    <div data-v-1513178e="">
                       <div data-v-1513178e="" class="menu">
                            <p class="" data-v-1513178e="" class="menu-label"></p><p> Filtros Inscrição </p>
                            <ul data-v-1513178e="" class="menu-list"></ul>
                            <form>
                                <div data-v-1513178e="" class="field">
                                    <!---->
                                    <div data-v-1513178e="" class="autocomplete control">
                                        <div class="control has-icons-left is-clearfix">
                                            <input type="text" id="myInput" onkeyup="myFunction()" autocomplete="off" 
                                                placeholder="Nome da Inscrição" class="input">
                                            <span class="icon is-left">
                                                <i class="mdi mdi-magnify mdi-24px"></i>
                                            </span>
                                            <!---->
                                            <!---->
                                        </div>
                                    </div>
                                    <!---->
                                </div>
                                <div data-v-1513178e="" class="field">
                                    <!---->
                                    <div data-v-1513178e="" class="autocomplete control">
                                        <div class="control has-icons-left is-clearfix">
                                            <input type="text" id="myInput" onkeyup="myFunction()" autocomplete="off" 
                                                placeholder="Nº Participantes" class="input">
                                            <span class="icon is-left">
                                                <i class="mdi mdi-magnify mdi-24px"></i>
                                            </span>
                                            <!---->
                                            <!---->
                                        </div>
                                    </div>
                                    <!---->
                                </div>
                                <div data-v-1513178e="" class="field">
                                    <!---->
                                    <div data-v-1513178e="" class="autocomplete control">
                                        <div class="control has-icons-left is-clearfix">
                                            <input type="text" id="myInput2" onkeyup="myFunction()" 
                                                autocomplete="off" placeholder="Ano Escolar" class="input">
                                            <span class="icon is-left">
                                                <i class="mdi mdi-magnify mdi-24px"></i>
                                            </span>
                                            <!---->
                                            <!---->
                                        </div>
                                    </div>
                                    <!---->
                                </div>
                                <div class="field">
                                    <button class="button is-outlined is-link is-danger"  type="submit">
                                        <span>Limpar</span>
                                        <span class="icon is-medium"><i class="mdi mdi-broom"></i></span>
                                    </button>
                                </div>
                            </form>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="column">
                        <div class="b-table">
                            <div class="field table-mobile-sort">
                                <div class="field has-addons">
                                    <div class="control is-expanded"><span class="select is-fullwidth"><select>
                                                <!---->
                                                <!---->
                                                <option value="[object Object]">
                                                    Grupo
                                                </option>
                                                <option value="[object Object]">
                                                    Nome
                                                </option>
                                                <option value="[object Object]">
                                                    Email
                                                </option>
                                                <option value="[object Object]">
                                                    Telefone
                                                </option>
                                                <option value="[object Object]">
                                                    Nº Participantes
                                                </option>
                                                <option value="[object Object]">
                                                    Ano Escolar
                                                </option>
                                                <option value="[object Object]">
                                                    Local
                                                </option>
                                                <!---->
                                            </select></span>
                                        <!---->
                                    </div>
                                    <div class="control">
                                        <button class="button is-primary">
                                            <span class="icon is-small">
                                                <i class="mdi mdi-menu-up"></i>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!---->
                            <div class="table-wrapper">
                                <table id="myTable" class="table table-striped">
                                    <thead>
                                        <tr>
                                            <!---->
                                            <th class="is-sortable">
                                                <div class="th-wrap" > Grupo <span class="icon is-small"
                                                    style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap" > Nome <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Email<span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Telefone <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Nº Participantes <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Ano Escolar<span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Escola <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Ações <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <!---->
                                        </tr>
                                        <!---->
                                        <!---->
                                    </thead>                                 
                                    <tbody>
                                            {% for inscricao in inscricoes %}
                                            <tr draggable="false" class="" scope="row">
                                            <!---->
                                                <td data-label="Grupo" class="">
                                                    {{ inscricao.inscricao.idinscricao }}
                                                </td>
                                                <td data-label="Nome" class="">
                                                    {{ inscricao.inscricao.nome }}
                                                </td>
                                                <td data-label="Email" class=""> 
                                                    {{ inscricao.inscricao.email }}
                                                </td>
                                                <td data-label="Telefone" class=""> 
                                                    {{ inscricao.inscricao.telefone }}
                                                </td>                                              
                                                <td data-label="Nº participantes" class=""> 
                                                    {{ inscricao.inscricao.nparticipantes }}
                                                </td>
                                                <td data-label="Ano Escolar" class=""> 
                                                    {{ inscricao.inscricao.ano }}
                                                </td>
                                                <td data-label="Escola" class=""> 
                                                    {{ inscricao.inscricao.escola }}
                                                </td>  
                                                <td data-label="Ações" class="has-text-centered">
                                                    <a role="button" data-toggle="modal" data-target="#{{ forloop.counter }}"><span class="icon has-text-success"><i class="mdi mdi-account-search mdi-24px"></i></span></a>
                                                </td>                           
                                            </td>
                                            {% endfor inscricao %}  
                                        <!---->
                                        <!---->
                                        <!---->
                                        <!---->
                                    </tbody>
                                    <!---->
                                </table>
                            </div>
                        </div>
                </div>
            </div>

    <!-----BUTTON-->

    {% for inscricao in inscricoes %}
    <div tabindex="-1" class="modal fade" id="{{forloop.counter}}" role="dialog" aria-hidden="true" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <button class="close" aria-label="Close" type="button" data-dismiss="modal">
                        <span aria-hidden="true">X</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div>                   
                        <form class="well form-horizontal ">
                            <div class="input-group col-sm-12">
                                <div class="input-group-prepend labelForm">
                                    <span class="input-group-text w-100">Nome do Responsável</span>
                                </div>
                                <input disabled="" class="form-control bg-light" type="text" value="{{ inscricao.inscricao.nome }}">
                            </div>
                            <br>
                            <div class="input-group col-sm-12">
                                <div class="input-group-prepend labelForm">
                                    <span class="input-group-text w-100">Ano Escolar</span>
                                </div>
                                <input disabled="" class="form-control col-sm-2 bg-light" type="text" value="{{ inscricao.inscricao.ano }}">
                            </div>
                            <br>
                            <div class="input-group col-sm-12">
                                <div class="input-group-prepend labelForm">
                                    <span class="input-group-text w-100">Area Científica</span>
                                </div>
                                <input disabled="" class="form-control col-sm-4 bg-light" type="text" value="{{ inscricao.inscricao.areacientifica }}">
                            </div>
                            <br>
                            <div class="input-group col-sm-12">
                                <div class="input-group-prepend labelForm">
                                    <span class="input-group-text w-100">Escola</span>
                                </div>
                                <input disabled="" class="form-control bg-light" type="text" value="{{ inscricao.inscricao.escola }}">
                            </div>
                            <br>
                            <div class="input-group col-sm-12">
                                <div class="input-group-prepend labelForm">
                                    <span class="input-group-text w-100">Local</span>
                                </div>
                                <input disabled="" class="form-control bg-light" type="text" value="{{ inscricao.inscricao.local }}">
                            </div>
                            <br>
                            <div class="form-group col-lg-8" style="text-align:center">
                            </div>
                        </form>
                    </div>

                    <div>

                        <!--Atividades inscritas-->

                        <h1 class="mx-3"> Atividades Inscritas </h1>
                        <div class="panel panel-default panel-table">
                            <div class="table-wrapper">
                                <table id="myTable2" class="table table-striped">
                                    <thead>
                                        <tr>
                                            <!---->
                                            <th class="is-sortable">
                                                <div class="th-wrap" > Título <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap" > Espaço <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap" > Departamento <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> U.O <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Dia <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Sessão <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <th class="is-sortable">
                                                <div class="th-wrap"> Nº Inscritos <span class="icon is-small"
                                                        style="display: none;"><i class="mdi mdi-menu-up"></i></span>
                                                </div>
                                            </th>
                                            <!---->
                                        </tr>
                                        <!---->
                                        <!---->
                                    </thead>                                 
                                    <tbody>
                                        {% for atividade in inscricao.atividade %}
                                        {% if atividade.unidade_organica == uo %}
                                            <tr draggable="false" class="" scope="row">
                                            <!---->
                                                <td data-label="Título" class="">
                                                    {{ atividade.titulo }}
                                                </td>
                                                <td data-label="Espaço" class="">
                                                    {{ atividade.espaco }}
                                                </td>
                                                <td data-label="Departamento" class=""> 
                                                    {{ atividade.departamento }}
                                                </td>
                                                <td data-label="U.O" class=""> 
                                                    {{ atividade.unidade_organica }}
                                                </td>   
                                                <td data-label="Dia" class=""> 
                                                    {{ atividade.dia | date:"d/m/Y"}}
                                                </td>
                                                <td data-label="Sessão" class=""> 
                                                    {{ atividade.hora | time:"H:i"}}
                                                </td>                                                  
                                                <td data-label="Nº Inscritos" class=""> 
                                                    {{ atividade.nr_inscritos }}
                                                </td>                         
                                            </tr>
                                        {% endif %}
                                        {% endfor %}
                                        <!---->
                                    </tbody>
                                    <!---->
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!----->

    <script>

        $(document).ready(function () {
            $('#myTable').DataTable({
                "paging": true,
                "info": false,
                "searching": false,
                "bLengthChange": false,
                "aLengthMenu": [[5, 10, 25, -1], [5, 10, 25, "All"]],
                "columnDefs": [
        { "orderable": false, "targets": 6 }
      ]
            });
        });
    
    </script>

    <!--FILTRAR-->

    <script>
        function myFunction() 
        {
            var input,input2,input3,filter,filter2,filter3, table, tr, td,td2,td3, i, txtValue,txtValue2,txtValue3;
            input = document.getElementById("myInput");
            input2 = document.getElementById("myInput2");
            input3 = document.getElementById("myInput3");
            filter = input.value.toUpperCase();
            filter2 = input2.value.toUpperCase();
            filter3 = input3.value.toUpperCase();
            console.log(filter+" "+filter2+" "+filter3);
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[1];
                td2 = tr[i].getElementsByTagName("td")[4];
                td3= tr[i].getElementsByTagName("td")[5];
                if (td && td2 && td3) {
                    txtValue = td.textContent || td.innerText;
                    txtValue2 = td2.textContent || td2.innerText;
                    txtValue3 = td3.textContent || td3.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1 && txtValue2.toUpperCase().indexOf(filter2) > -1 && txtValue3.toUpperCase().indexOf(filter3) > -1 ) 
                    {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
        </script>


{% endblock content %}